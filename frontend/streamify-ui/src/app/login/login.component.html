<div class="bg">
  <div class="container">
    <div class="card">
      <div class="brand">
        <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">
          <circle cx="32" cy="32" r="30" fill="#1db954"/>
          <polygon points="24,20 48,32 24,44" fill="#fff"/>
        </svg>
        <h1>Streamify</h1>
      </div>

      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <label class="field">
          <span class="icon-left" aria-hidden="true">
            <!-- user icon -->
            <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-4 0-8 2-8 5v1h16v-1c0-3-4-5-8-5z"/></svg>
          </span>
          <input type="email" formControlName="email" placeholder="Email" aria-label="Email" />
        </label>
        @if (email?.touched && email?.invalid) {
        <div class="error">
          @if (email?.errors?.['required']) {
          <small>Email is required</small>
          }
          @if (email?.errors?.['email']) {
          <small>Enter a valid email</small>
          }
        </div>
        }

        <label class="field">
          <span class="icon-left" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path fill="currentColor" d="M17 8h-1V6a4 4 0 10-8 0v2H7a2 2 0 00-2 2v8a2 2 0 002 2h10a2 2 0 002-2v-8a2 2 0 00-2-2zm-6 8a2 2 0 112 2 2 2 0 01-2-2zm3-8H8V6a3 3 0 016 0v2z"/></svg>
          </span>

          <input [type]="hide ? 'password' : 'text'" formControlName="password" placeholder="Password" aria-label="Password" />
          <button type="button" class="icon-right" (click)="toggleHide()" [attr.aria-pressed]="!hide" aria-label="Toggle password visibility">
            @if (hide) {
            <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 5c5 0 9.3 3.1 11 7-1.7 3.9-6 7-11 7S2.7 15.9 1 12c1.7-3.9 6-7 11-7zm0 12a5 5 0 100-10 5 5 0 000 10z"/></svg>
            } @else {
            <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 7a5 5 0 00-5 5c0 .9.3 1.7.8 2.4L6 17a9 9 0 010-10l1.3 1.3A4.9 4.9 0 0012 7zm0 10a5 5 0 005-5c0-.9-.3-1.7-.8-2.4L18 7a9 9 0 010 10l-1.3-1.3A4.9 4.9 0 0012 17zM2 2l20 20-1.4 1.4L.6 3.4 2 2z"/></svg>
            }
          </button>
        </label>
        @if (password?.touched && password?.invalid) {
        <div class="error">
          @if (password?.errors?.['required']) {
          <small>Password is required</small>
          }
        </div>
        }

        @if (loginError) {
        <div class="error">
          <small>{{ loginError }}</small>
        </div>
        }

        <div class="actions">
          <button class="btn" type="submit" [disabled]="loading">
            @if (!loading) {
            <span>Sign In</span>
            } @else {
            <span>Signing in...</span>
            }
          </button>
          <a class="link" href="#" tabindex="-1">Forgot password?</a>
        </div>
      </form>
    </div>
  </div>
</div>
